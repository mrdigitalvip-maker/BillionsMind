<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>BillionMind AI ‚Ä¢ Chat de Alta Performance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #050712;
      --bg-elevated: #090c18;
      --bg-soft: #0f1421;
      --border-soft: rgba(148, 163, 184, 0.4);
      --primary: #f5c352;
      --primary-soft: rgba(245, 195, 82, 0.18);
      --accent: #4ade80;
      --text-main: #f9fafb;
      --text-soft: #a5b4cf;
      --text-muted: #6b7280;
      --shadow: 0 20px 50px rgba(0, 0, 0, 0.65);
      --radius-lg: 24px;
      --radius-pill: 999px;
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f5f5f9;
        --bg-elevated: #ffffff;
        --bg-soft: #eef1f9;
        --border-soft: rgba(15, 23, 42, 0.12);
        --text-main: #020617;
        --text-soft: #4b5563;
        --text-muted: #6b7280;
        --shadow: 0 10px 30px rgba(15, 23, 42, 0.18);
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, var(--bg) 40%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px 10px 86px;
    }

    .app-shell {
      width: 100%;
      max-width: 480px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    /* HEADER PRINCIPAL */
    .hero-header {
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      background: radial-gradient(circle at top left, rgba(245,195,82,0.24), transparent 55%),
                  linear-gradient(145deg, #020617, #020617);
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow: var(--shadow);
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }

    .logo-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #fff7de, #f5c352 50%, #7c4e17 80%, #000 100%);
      box-shadow: 0 0 20px rgba(245,195,82,0.9);
      flex-shrink: 0;
    }

    .hero-texts {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .hero-title-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
    }

    .hero-title {
      font-size: 15px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .hero-status-pill {
      font-size: 10px;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(74, 222, 128, 0.7);
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .hero-status-pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34,197,94,0.9);
    }

    .hero-headline {
      margin-top: 4px;
      font-size: 19px;
      line-height: 1.35;
    }

    .hero-headline span {
      color: var(--primary);
    }

    .hero-sub {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    .hero-ctas {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .btn-main {
      border-radius: var(--radius-pill);
      padding: 7px 14px;
      font-size: 12px;
      border: none;
      background: linear-gradient(120deg, #f97316, #facc15);
      color: #111827;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 12px 24px rgba(248, 181, 0, 0.45);
    }

    .btn-ghost {
      border-radius: var(--radius-pill);
      padding: 6px 12px;
      font-size: 11px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text-soft);
      cursor: pointer;
    }

    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
      font-size: 10px;
    }

    .hero-badge {
      padding: 3px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .hero-badge.primary {
      border-color: rgba(245,195,82,0.85);
      background: var(--primary-soft);
      color: var(--primary);
    }

    /* TELAS (UMA POR VEZ) */
    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    /* HOME ‚Äì B√îNUS DE IDEIAS */
    .home-grid {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .home-card {
      padding: 14px 14px 12px;
      border-radius: var(--radius-lg);
      background: linear-gradient(155deg, var(--bg-elevated), var(--bg-soft));
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow);
      font-size: 13px;
      color: var(--text-soft);
    }

    .home-card-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .home-card-main {
      font-size: 15px;
      color: var(--text-main);
      margin-bottom: 4px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--text-muted);
    }

    .pill.gold {
      border-color: rgba(245,195,82,0.85);
      background: var(--primary-soft);
      color: var(--primary);
    }

    .idea-list {
      margin-top: 6px;
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
    }

    .idea-list li::before {
      content: "‚Ä¢ ";
      color: var(--primary);
    }

    /* CHAT ‚Äì TELA DEDICADA */
    .chat-wrapper {
      margin-top: 4px;
      padding: 14px 12px 12px;
      background: linear-gradient(160deg, var(--bg-elevated), #020617);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      height: calc(100vh - 170px);
      max-height: 520px;
      min-height: 360px;
    }

    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .chat-header span strong {
      color: var(--primary);
    }

    .chat-mode-pill {
      padding: 3px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-soft);
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 4px 2px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      scrollbar-width: thin;
      scrollbar-color: rgba(148,163,184,0.7) transparent;
    }

    .chat-msg {
      max-width: 92%;
      padding: 8px 11px;
      border-radius: 16px;
      font-size: 13px;
      line-height: 1.4;
    }

    .chat-msg.user {
      align-self: flex-end;
      background: linear-gradient(135deg, #2563eb, #22c55e);
      color: #f9fafb;
      border-bottom-right-radius: 4px;
    }

    .chat-msg.bot {
      align-self: flex-start;
      background: #020617;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-soft);
      border-bottom-left-radius: 4px;
    }

    .chat-msg.bot strong {
      color: var(--primary);
    }

    .chat-footer {
      display: flex;
      gap: 8px;
      margin-top: 6px;
    }

    .chat-input {
      flex: 1;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 8px 12px;
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
    }

    .chat-input::placeholder {
      color: var(--text-muted);
    }

    .chat-send-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: radial-gradient(circle at 30% 20%, #fff7e5, #f5c352 45%, #7c4e17 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 12px 26px rgba(245,195,82,0.75);
      cursor: pointer;
    }

    .chat-send-btn svg {
      width: 18px;
      height: 18px;
      fill: #111827;
    }

    .chat-hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* HIST√ìRICO */
    .screen-card {
      margin-top: 4px;
      padding: 14px 14px 12px;
      border-radius: var(--radius-lg);
      background: linear-gradient(150deg, var(--bg-elevated), var(--bg-soft));
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow);
      font-size: 13px;
      color: var(--text-soft);
    }

    .screen-title {
      font-size: 15px;
      margin-bottom: 4px;
      color: var(--text-main);
    }

    .history-list {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 12px;
    }

    .history-item {
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
    }

    .history-item-header {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .history-item-main {
      color: var(--primary);
    }

    /* IMAGENS */
    .image-form {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .image-textarea {
      width: 100%;
      min-height: 70px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.7);
      padding: 8px 10px;
      background: rgba(15,23,42,0.96);
      color: var(--text-main);
      font-size: 13px;
      resize: vertical;
    }

    .image-textarea::placeholder {
      color: var(--text-muted);
    }

    .image-actions {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .btn-small {
      border-radius: var(--radius-pill);
      padding: 6px 12px;
      border: none;
      font-size: 12px;
      cursor: pointer;
    }

    .btn-gold {
      background: linear-gradient(120deg, #f59e0b, #facc15);
      color: #111827;
      box-shadow: 0 8px 20px rgba(248, 181, 0, 0.45);
    }

    .btn-outline {
      background: transparent;
      border: 1px solid rgba(148,163,184,0.7);
      color: var(--text-soft);
    }

    .image-preview {
      margin-top: 8px;
      border-radius: 16px;
      border: 1px dashed rgba(148,163,184,0.7);
      background: radial-gradient(circle at top, rgba(245,195,82,0.16), rgba(15,23,42,0.96));
      min-height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      font-size: 12px;
      text-align: center;
      color: var(--text-soft);
    }

    .image-preview img {
      max-width: 100%;
      border-radius: 14px;
    }

    /* PLANOS / ASSINATURA */
    .plans-grid {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .plan-card {
      padding: 12px 12px 10px;
      border-radius: 18px;
      background: radial-gradient(circle at top left, rgba(245,195,82,0.15), var(--bg-elevated));
      border: 1px solid rgba(148,163,184,0.65);
      box-shadow: var(--shadow);
      font-size: 13px;
    }

    .plan-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
    }

    .plan-name {
      font-size: 14px;
      font-weight: 600;
    }

    .plan-price {
      font-size: 13px;
      color: var(--primary);
    }

    .plan-tag {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148,163,184,0.7);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .plan-features {
      margin-top: 6px;
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 3px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .plan-features li::before {
      content: "‚úì ";
      color: var(--accent);
    }

    .plan-btn {
      margin-top: 8px;
      width: 100%;
      border-radius: var(--radius-pill);
      padding: 7px 0;
      border: none;
      font-size: 12px;
      cursor: pointer;
    }

    .plan-btn.primary {
      background: linear-gradient(120deg, #f97316, #facc15);
      color: #111827;
    }

    .plan-btn.ghost {
      background: rgba(15,23,42,0.9);
      color: var(--text-soft);
      border: 1px solid rgba(148,163,184,0.7);
    }

    .plans-note {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
    }

    /* NAV INFERIOR */
    .bottom-nav {
      position: fixed;
      left: 50%;
      bottom: 8px;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      padding: 0 10px;
      z-index: 40;
    }

    .bottom-nav-inner {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 4px;
      padding: 6px;
      border-radius: var(--radius-pill);
      background: rgba(2,6,23,0.96);
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 20px 45px rgba(0,0,0,0.9);
    }

    .nav-item {
      border-radius: var(--radius-pill);
      padding: 6px 2px;
      font-size: 10px;
      color: var(--text-muted);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      cursor: pointer;
      border: 1px solid transparent;
    }

    .nav-item span.icon {
      font-size: 16px;
      line-height: 1;
    }

    .nav-item.active {
      background: rgba(245,195,82,0.16);
      border-color: rgba(245,195,82,0.9);
      color: var(--primary);
    }

    @media (min-width: 768px) {
      body {
        padding-top: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- HERO / CABE√áALHO PERSUASIVO -->
    <header class="hero-header">
      <div class="logo-circle"></div>
      <div class="hero-texts">
        <div class="hero-title-row">
          <div class="hero-title">BILLIONMIND AI</div>
          <div class="hero-status-pill">
            <span class="dot"></span>
            Chat liberado
          </div>
        </div>
        <h1 class="hero-headline">
          Um √∫nico chat para organizar <span>disciplina, dinheiro e lifestyle</span>.
        </h1>
        <p class="hero-sub">
          Escreva como voc√™ quer viver e deixe a IA montar metas di√°rias, planos de 30 dias e ideias de renda extra.
        </p>
        <div class="hero-ctas">
          <button class="btn-main" onclick="goToScreen('chat')">
            Come√ßar sess√£o agora
          </button>
          <button class="btn-ghost" onclick="goToScreen('plans')">
            Ver planos e benef√≠cios
          </button>
        </div>
        <div class="hero-badges">
          <div class="hero-badge primary">B√¥nus ¬∑ ideias de renda extra guiadas</div>
          <div class="hero-badge">Plano de 30 dias autom√°tico</div>
          <div class="hero-badge">Estilo de vida sem bagun√ßa mental</div>
        </div>
      </div>
    </header>

    <!-- TELA HOME -->
    <section id="screen-home" class="screen active">
      <div class="home-grid">
        <article class="home-card">
          <div class="home-card-title">B√îNUS EXCLUSIVO ¬∑ IDEIAS PRONTAS</div>
          <div class="home-card-main">
            Comece hoje com 3 ideias simples de renda extra que cabem na sua rotina.
          </div>
          <ul class="idea-list">
            <li>Transformar conhecimento em roteiro de conte√∫do (Reels/TikTok) para vender seu app ou produto.</li>
            <li>Usar o BillionMind para montar 30 posts de autoridade sobre disciplina e liberdade financeira.</li>
            <li>Criar um mini-produto digital ‚ÄúPlano de 7 dias‚Äù com as rotinas sugeridas pelo chat.</li>
          </ul>
          <div class="pill-row">
            <span class="pill gold">Use o chat para transformar cada ideia em passo a passo.</span>
          </div>
        </article>

        <article class="home-card">
          <div class="home-card-title">COMO O APP TRABALHA POR VOC√ä</div>
          <p class="home-card-main">
            1. Voc√™ envia sua meta. 2. O chat monta o foco do dia. 3. O hist√≥rico registra. 4. As imagens mostram o lifestyle que voc√™ est√° construindo.
          </p>
          <div class="pill-row">
            <span class="pill">Chat de alta performance</span>
            <span class="pill">Hist√≥rico de sess√µes</span>
            <span class="pill">Imagens de lifestyle</span>
            <span class="pill">Planos Free / Pro / Premium</span>
          </div>
        </article>
      </div>
    </section>

    <!-- TELA CHAT -->
    <section id="screen-chat" class="screen">
      <div class="chat-wrapper">
        <div class="chat-header">
          <span><strong>BillionMind AI</strong> ¬∑ modo disciplina + renda extra</span>
          <span class="chat-mode-pill">Conta Free ¬∑ 3 testes por dia</span>
        </div>

        <div id="chatMessages" class="chat-messages">
          <div class="chat-msg bot">
            <strong>BillionMind:</strong> me conte em uma frase como voc√™ quer estar em 30 dias (disciplina, dinheiro e lifestyle).
            Eu vou montar o foco de hoje e os pr√≥ximos passos.
          </div>
        </div>

        <div class="chat-footer">
          <input
            id="chatInput"
            class="chat-input"
            type="text"
            placeholder="Ex.: Quero 30 dias de disciplina e renda extra √† noite..."
          />
          <button class="chat-send-btn" id="sendBtn" aria-label="Enviar mensagem">
            <svg viewBox="0 0 24 24">
              <path d="M3.4 20.6L21 12 3.4 3.4 3 10.2 13 12 3 13.8z" />
            </svg>
          </button>
        </div>
        <p class="chat-hint">
          Dica: quanto mais espec√≠fico voc√™ for (hor√°rio, objetivo, valor em dinheiro), mais forte ser√° a sess√£o.
        </p>
      </div>
    </section>

    <!-- TELA HIST√ìRICO -->
    <section id="screen-history" class="screen">
      <div class="screen-card">
        <h2 class="screen-title">Hist√≥rico das suas sess√µes</h2>
        <p>Veja como sua disciplina e sua renda extra evoluem dia ap√≥s dia.</p>
        <div id="historyList" class="history-list">
          <div class="history-item">
            <div class="history-item-header">Pr√©-visualiza√ß√£o</div>
            <div class="history-item-main">Dia 01 ¬∑ Trabalhar 90 min em um objetivo importante.</div>
            <div>Quando o Supabase estiver conectado, cada sess√£o real aparecer√° aqui.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- TELA IMAGENS -->
    <section id="screen-images" class="screen">
      <div class="screen-card">
        <h2 class="screen-title">Cria√ß√£o de Imagens ¬∑ Lifestyle guiado</h2>
        <p>Gere imagens que representem o estilo de vida que voc√™ est√° construindo com o BillionMind.</p>

        <div class="image-form">
          <textarea
            id="imagePrompt"
            class="image-textarea"
            placeholder="Ex.: garagem escura com carro de luxo, computador ligado mostrando gr√°fico de lucros, luzes douradas, vibe de vit√≥ria silenciosa..."
          ></textarea>
          <div class="image-actions">
            <button class="btn-small btn-gold" onclick="generateImage()">
              Gerar imagem agora
            </button>
            <button class="btn-small btn-outline" onclick="clearImage()">
              Limpar
            </button>
          </div>
          <div id="imagePreview" class="image-preview">
            Nenhuma imagem gerada ainda. Envie um prompt para ver o lifestyle na tela.
          </div>
        </div>
      </div>
    </section>

    <!-- TELA PLANOS / ASSINATURA -->
    <section id="screen-plans" class="screen">
      <div class="screen-card">
        <h2 class="screen-title">Planos BillionMind ¬∑ escolha seu n√≠vel</h2>
        <p>Todos come√ßam no Free. Quando quiser acelerar, os planos pagos desbloqueiam mais poder de foco.</p>

        <div class="plans-grid">
          <div class="plan-card">
            <div class="plan-header">
              <div>
                <div class="plan-name">Free</div>
                <div class="plan-price">R$ 0 / m√™s</div>
              </div>
              <div class="plan-tag">Comece agora</div>
            </div>
            <ul class="plan-features">
              <li>3 sess√µes guiadas por dia no chat.</li>
              <li>Hist√≥rico b√°sico das √∫ltimas sess√µes.</li>
              <li>Acesso ao gerador de ideias de renda extra.</li>
            </ul>
            <button class="plan-btn ghost" onclick="selectPlan('free')">Plano atual</button>
          </div>

          <div class="plan-card">
            <div class="plan-header">
              <div>
                <div class="plan-name">Pro</div>
                <div class="plan-price">R$ 29 / m√™s</div>
              </div>
              <div class="plan-tag">Mais foco</div>
            </div>
            <ul class="plan-features">
              <li>Sess√µes ilimitadas no chat de alta performance.</li>
              <li>Hist√≥rico completo com progresso de 30 dias.</li>
              <li>Imagens de lifestyle em alta qualidade salvas no app.</li>
            </ul>
            <button class="plan-btn primary" onclick="selectPlan('pro')">Quero o Pro</button>
          </div>

          <div class="plan-card">
            <div class="plan-header">
              <div>
                <div class="plan-name">Premium</div>
                <div class="plan-price">R$ 59 / m√™s</div>
              </div>
              <div class="plan-tag">Modo milion√°rio</div>
            </div>
            <ul class="plan-features">
              <li>Todos os benef√≠cios do Pro.</li>
              <li>Protocolos avan√ßados de disciplina, renda extra e lifestyle.</li>
              <li>Rotinas especiais de fim de semana e revis√£o mensal guiada.</li>
            </ul>
            <button class="plan-btn primary" onclick="selectPlan('premium')">Ativar modo Premium</button>
          </div>
        </div>

        <p class="plans-note">
          Ao clicar em um plano, o app pode abrir a sua p√°gina de checkout (Kiwify / Stripe) usando a API do BillionMind.
        </p>
      </div>
    </section>
  </div>

  <!-- NAV INFERIOR -->
  <nav class="bottom-nav">
    <div class="bottom-nav-inner">
      <button class="nav-item active" data-target="home">
        <span class="icon">üè†</span>
        <span>Home</span>
      </button>
      <button class="nav-item" data-target="chat">
        <span class="icon">üí¨</span>
        <span>Chat</span>
      </button>
      <button class="nav-item" data-target="history">
        <span class="icon">üìú</span>
        <span>Hist√≥rico</span>
      </button>
      <button class="nav-item" data-target="images">
        <span class="icon">üñºÔ∏è</span>
        <span>Imagens</span>
      </button>
      <button class="nav-item" data-target="plans">
        <span class="icon">üí≥</span>
        <span>Planos</span>
      </button>
    </div>
  </nav>

  <script>
    /* NAV / TROCA DE TELAS */
    const navItems = document.querySelectorAll(".nav-item");
    const screens = {
      home: document.getElementById("screen-home"),
      chat: document.getElementById("screen-chat"),
      history: document.getElementById("screen-history"),
      images: document.getElementById("screen-images"),
      plans: document.getElementById("screen-plans"),
    };

    function setActiveScreen(target) {
      Object.values(screens).forEach((s) => s.classList.remove("active"));
      screens[target].classList.add("active");
      navItems.forEach((btn) =>
        btn.classList.toggle("active", btn.dataset.target === target)
      );
      if (target === "history") loadHistory();
    }

    navItems.forEach((btn) => {
      btn.addEventListener("click", () => setActiveScreen(btn.dataset.target));
    });

    function goToScreen(target) {
      setActiveScreen(target);
      if (target === "chat") {
        document.getElementById("chatInput").focus();
      }
    }

    /* CHAT ‚Äì INTEGRA√á√ÉO COM /api/chat */
    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");
    const chatMessages = document.getElementById("chatMessages");

    function appendMsg(text, role) {
      const div = document.createElement("div");
      div.className = "chat-msg " + role;
      div.textContent = text;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function sendMessage() {
      const text = chatInput.value.trim();
      if (!text) return;
      appendMsg(text, "user");
      chatInput.value = "";

      const thinking = document.createElement("div");
      thinking.className = "chat-msg bot";
      thinking.textContent = "BillionMind est√° montando sua sess√£o de foco...";
      chatMessages.appendChild(thinking);
      chatMessages.scrollTop = chatMessages.scrollHeight;

      try {
        const res = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text }),
        });

        chatMessages.removeChild(thinking);

        if (!res.ok) {
          appendMsg(
            "Modo demonstra√ß√£o: hoje, foque em 90 minutos de trabalho profundo em uma tarefa que aproxima voc√™ da sua meta.",
            "bot"
          );
          return;
        }

        const data = await res.json();
        appendMsg(
          data.reply ||
            "Sess√£o criada. Quando a API estiver 100%, o detalhamento vir√° daqui.",
          "bot"
        );
      } catch (err) {
        chatMessages.removeChild(thinking);
        appendMsg(
          "N√£o consegui falar com o servidor agora. Use essa pr√©via: separe 3 blocos de 30 min hoje para agir em sil√™ncio na sua meta principal.",
          "bot"
        );
      }
    }

    sendBtn.addEventListener("click", sendMessage);
    chatInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    /* HIST√ìRICO ‚Äì /api/history */
    let historyLoaded = false;
    async function loadHistory() {
      if (historyLoaded) return;
      historyLoaded = true;
      const list = document.getElementById("historyList");

      try {
        const res = await fetch("/api/history");
        if (!res.ok) return;
        const data = await res.json();
        if (!Array.isArray(data.items) || !data.items.length) return;

        list.innerHTML = "";
        data.items.forEach((item) => {
          const div = document.createElement("div");
          div.className = "history-item";
          div.innerHTML =
            '<div class="history-item-header">' +
            (item.date || "Sess√£o") +
            "</div>" +
            '<div class="history-item-main">' +
            (item.title || "") +
            "</div>" +
            "<div>" +
            (item.summary || "") +
            "</div>";
          list.appendChild(div);
        });
      } catch (err) {
        // mant√©m exemplo padr√£o
      }
    }

    /* IMAGENS ‚Äì /api/image */
    async function generateImage() {
      const prompt = document.getElementById("imagePrompt").value.trim();
      const preview = document.getElementById("imagePreview");
      if (!prompt) {
        preview.textContent = "Escreva um prompt antes de gerar a imagem.";
        return;
      }

      preview.textContent = "Gerando imagem de lifestyle...";

      try {
        const res = await fetch("/api/image", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt }),
        });

        if (!res.ok) {
          preview.textContent =
            "Modo demonstra√ß√£o: quando a API estiver ativa, a imagem aparecer√° aqui.";
          return;
        }

        const data = await res.json();
        if (data.url) {
          preview.innerHTML = '<img src="' + data.url + '" alt="Imagem gerada" />';
        } else {
          preview.textContent =
            "Imagem criada, mas o servidor n√£o retornou a URL corretamente.";
        }
      } catch (err) {
        preview.textContent =
          "N√£o consegui falar com o servidor agora. Use esse espa√ßo para visualizar as imagens que o app vai gerar.";
      }
    }

    function clearImage() {
      document.getElementById("imagePrompt").value = "";
      document.getElementById("imagePreview").textContent =
        "Nenhuma imagem gerada ainda. Envie um prompt para ver o lifestyle na tela.";
    }

    /* PLANOS ‚Äì /api/checkout */
    async function selectPlan(plan) {
      try {
        const res = await fetch("/api/checkout", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ plan }),
        });

        if (!res.ok) {
          alert(
            "Modo demonstra√ß√£o: conecte este bot√£o √† sua p√°gina de checkout (Kiwify / Stripe) assim que estiver pronta."
          );
          return;
        }

        const data = await res.json();
        if (data.url) {
          window.location.href = data.url;
        } else {
          alert(
            "Plano enviado. Quando a integra√ß√£o estiver pronta, voc√™ ser√° redirecionado automaticamente."
          );
        }
      } catch (err) {
        alert(
          "N√£o consegui abrir o checkout agora. Use este bot√£o como teste at√© conectar a sua p√°gina real."
        );
      }
    }
  </script>
</body>
</html>
